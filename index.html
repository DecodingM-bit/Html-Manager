<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Offline App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .status {
            display: inline-block;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            font-size: 0.9em;
        }

        .status.online::before {
            content: "‚óè ";
            color: #4ade80;
        }

        .status.offline::before {
            content: "‚óè ";
            color: #ef4444;
        }

        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .input-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        input, textarea {
            flex: 1;
            padding: 10px;
            border: 2px solid #e5e7eb;
            border-radius: 5px;
            font-family: inherit;
            font-size: 1em;
        }

        input:focus, textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        button {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.3s;
        }

        button:hover {
            background: #764ba2;
        }

        .button-small {
            padding: 5px 10px;
            font-size: 0.9em;
        }

        ul {
            list-style: none;
            margin-top: 15px;
        }

        li {
            background: #f3f4f6;
            padding: 12px;
            margin: 8px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .delete-btn {
            background: #ef4444;
            padding: 5px 10px;
            font-size: 0.8em;
        }

        .delete-btn:hover {
            background: #dc2626;
        }

        .calculator-display {
            background: #1f2937;
            color: #10b981;
            padding: 15px;
            border-radius: 5px;
            text-align: right;
            font-size: 1.5em;
            margin-bottom: 10px;
            min-height: 50px;
            word-wrap: break-word;
            word-break: break-all;
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 5px;
        }

        .calc-btn {
            padding: 20px;
            font-size: 1.2em;
            background: #e5e7eb;
            color: #1f2937;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
        }

        .calc-btn:hover {
            background: #d1d5db;
        }

        .calc-btn.operator {
            background: #667eea;
            color: white;
        }

        .calc-btn.operator:hover {
            background: #764ba2;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .note-display {
            background: #f9fafb;
            padding: 15px;
            border-radius: 5px;
            min-height: 100px;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .color-picker-group {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .color-box {
            width: 40px;
            height: 40px;
            border-radius: 5px;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.3s;
        }

        .color-box:hover {
            transform: scale(1.1);
        }

        .color-box.selected {
            border-color: #333;
        }

        @media (max-width: 600px) {
            .grid {
                grid-template-columns: 1fr;
            }

            header h1 {
                font-size: 1.8em;
            }

            .calculator-buttons {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üì± Offline App</h1>
            <div class="status" id="status">Online</div>
        </header>

        <div class="grid">
            <!-- Todo List -->
            <div class="card">
                <h2>‚úì Todo List</h2>
                <div class="input-group">
                    <input type="text" id="todoInput" placeholder="Add a new task...">
                    <button onclick="addTodo()">Add</button>
                </div>
                <ul id="todoList"></ul>
            </div>

            <!-- Notes -->
            <div class="card">
                <h2>üìù Notes</h2>
                <textarea id="noteInput" placeholder="Write your notes here..."></textarea>
                <button onclick="saveNote()" style="width: 100%; margin-top: 10px;">Save</button>
                <div class="note-display" id="noteDisplay"></div>
            </div>

            <!-- Calculator -->
            <div class="card">
                <h2>üî¢ Calculator</h2>
                <div class="calculator-display" id="calcDisplay">0</div>
                <div class="calculator-buttons">
                    <button class="calc-btn" onclick="clearCalc()">C</button>
                    <button class="calc-btn operator" onclick="appendCalc('/')">/</button>
                    <button class="calc-btn operator" onclick="appendCalc('*')">√ó</button>
                    <button class="calc-btn operator" onclick="deleteCalc()">‚å´</button>
                    
                    <button class="calc-btn" onclick="appendCalc('7')">7</button>
                    <button class="calc-btn" onclick="appendCalc('8')">8</button>
                    <button class="calc-btn" onclick="appendCalc('9')">9</button>
                    <button class="calc-btn operator" onclick="appendCalc('-')">‚àí</button>
                    
                    <button class="calc-btn" onclick="appendCalc('4')">4</button>
                    <button class="calc-btn" onclick="appendCalc('5')">5</button>
                    <button class="calc-btn" onclick="appendCalc('6')">6</button>
                    <button class="calc-btn operator" onclick="appendCalc('+')">+</button>
                    
                    <button class="calc-btn" onclick="appendCalc('1')">1</button>
                    <button class="calc-btn" onclick="appendCalc('2')">2</button>
                    <button class="calc-btn" onclick="appendCalc('3')">3</button>
                    <button class="calc-btn operator" onclick="appendCalc('.')">.</button>
                    
                    <button class="calc-btn" onclick="appendCalc('0')" style="grid-column: span 2;">0</button>
                    <button class="calc-btn operator" onclick="calculateResult()" style="grid-column: span 2;">=</button>
                </div>
            </div>

            <!-- Color Picker -->
            <div class="card">
                <h2>üé® Color Mixer</h2>
                <div class="color-picker-group">
                    <div class="color-box selected" style="background: #667eea;" onclick="setColor('#667eea')"></div>
                    <div class="color-box" style="background: #764ba2;" onclick="setColor('#764ba2')"></div>
                    <div class="color-box" style="background: #4ade80;" onclick="setColor('#4ade80')"></div>
                    <div class="color-box" style="background: #f59e0b;" onclick="setColor('#f59e0b')"></div>
                    <div class="color-box" style="background: #ef4444;" onclick="setColor('#ef4444')"></div>
                </div>
                <input type="color" id="colorInput" value="#667eea" onchange="setColor(this.value)">
                <div id="colorPreview" style="margin-top: 10px; padding: 20px; background: #667eea; border-radius: 5px; color: white; text-align: center; font-weight: bold;"></div>
            </div>

            <!-- Converter -->
            <div class="card">
                <h2>üîÑ Converter</h2>
                <input type="number" id="tempInput" placeholder="Enter temperature">
                <div class="input-group" style="margin-top: 10px;">
                    <button onclick="convertCelsius()">¬∞C to ¬∞F</button>
                    <button onclick="convertFahrenheit()">¬∞F to ¬∞C</button>
                </div>
                <div id="convertResult" style="background: #f3f4f6; padding: 10px; border-radius: 5px; margin-top: 10px;"></div>
            </div>

            <!-- Timer/Stopwatch -->
            <div class="card">
                <h2>‚è±Ô∏è Stopwatch</h2>
                <div style="font-size: 2em; text-align: center; font-weight: bold; margin: 20px 0; font-family: monospace;" id="timerDisplay">00:00:00</div>
                <div class="input-group">
                    <button id="startBtn" onclick="startTimer()">Start</button>
                    <button onclick="stopTimer()">Stop</button>
                    <button onclick="resetTimer()">Reset</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ========== Status Check ==========
        function updateStatus() {
            const status = document.getElementById('status');
            if (navigator.onLine) {
                status.textContent = 'Online';
                status.className = 'status online';
            } else {
                status.textContent = 'Offline';
                status.className = 'status offline';
            }
        }

        window.addEventListener('online', updateStatus);
        window.addEventListener('offline', updateStatus);
        updateStatus();

        // ========== Local Storage ==========
        function loadData() {
            const todos = JSON.parse(localStorage.getItem('todos')) || [];
            const note = localStorage.getItem('note') || '';
            
            todos.forEach(todo => addTodoElement(todo));
            if (note) document.getElementById('noteDisplay').textContent = note;
        }

        function saveToStorage(key, value) {
            localStorage.setItem(key, value);
        }

        // ========== Todo List ==========
        function addTodo() {
            const input = document.getElementById('todoInput');
            if (input.value.trim() === '') return;
            
            addTodoElement(input.value);
            
            const todos = JSON.parse(localStorage.getItem('todos')) || [];
            todos.push(input.value);
            saveToStorage('todos', JSON.stringify(todos));
            
            input.value = '';
        }

        function addTodoElement(text) {
            const li = document.createElement('li');
            li.textContent = text;
            const btn = document.createElement('button');
            btn.textContent = 'Delete';
            btn.className = 'delete-btn button-small';
            btn.onclick = function() {
                li.remove();
                updateTodos();
            };
            li.appendChild(btn);
            document.getElementById('todoList').appendChild(li);
        }

        function updateTodos() {
            const todos = Array.from(document.querySelectorAll('#todoList li'))
                .map(li => li.textContent.replace('Delete', '').trim());
            saveToStorage('todos', JSON.stringify(todos));
        }

        // ========== Notes ==========
        function saveNote() {
            const note = document.getElementById('noteInput').value;
            document.getElementById('noteDisplay').textContent = note;
            saveToStorage('note', note);
            document.getElementById('noteInput').value = '';
        }

        // ========== Calculator ==========
        let calcDisplay = '0';

        function appendCalc(value) {
            if (calcDisplay === '0') calcDisplay = '';
            calcDisplay += value;
            updateCalcDisplay();
        }

        function clearCalc() {
            calcDisplay = '0';
            updateCalcDisplay();
        }

        function deleteCalc() {
            calcDisplay = calcDisplay.slice(0, -1) || '0';
            updateCalcDisplay();
        }

        function calculateResult() {
            try {
                calcDisplay = eval(calcDisplay).toString();
                updateCalcDisplay();
            } catch {
                calcDisplay = 'Error';
                updateCalcDisplay();
            }
        }

        function updateCalcDisplay() {
            document.getElementById('calcDisplay').textContent = calcDisplay;
        }

        // ========== Color Picker ==========
        function setColor(color) {
            document.body.style.background = `linear-gradient(135deg, ${color} 0%, ${adjustColor(color, -30)} 100%)`;
            document.getElementById('colorInput').value = color;
            document.getElementById('colorPreview').style.background = color;
            document.getElementById('colorPreview').textContent = color;
            
            document.querySelectorAll('.color-box').forEach(box => {
                box.classList.remove('selected');
            });
            event.target.classList.add('selected');
            
            saveToStorage('selectedColor', color);
        }

        function adjustColor(color, percent) {
            const num = parseInt(color.replace("#", ""), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }

        // ========== Converter ==========
        function convertCelsius() {
            const celsius = parseFloat(document.getElementById('tempInput').value);
            if (isNaN(celsius)) {
                document.getElementById('convertResult').textContent = 'Please enter a valid number';
                return;
            }
            const fahrenheit = (celsius * 9/5) + 32;
            document.getElementById('convertResult').textContent = `${celsius}¬∞C = ${fahrenheit.toFixed(2)}¬∞F`;
        }

        function convertFahrenheit() {
            const fahrenheit = parseFloat(document.getElementById('tempInput').value);
            if (isNaN(fahrenheit)) {
                document.getElementById('convertResult').textContent = 'Please enter a valid number';
                return;
            }
            const celsius = (fahrenheit - 32) * 5/9;
            document.getElementById('convertResult').textContent = `${fahrenheit}¬∞F = ${celsius.toFixed(2)}¬∞C`;
        }

        // ========== Stopwatch ==========
        let timerInterval = null;
        let seconds = 0;

        function startTimer() {
            if (timerInterval) return;
            timerInterval = setInterval(() => {
                seconds++;
                updateTimerDisplay();
            }, 1000);
            document.getElementById('startBtn').disabled = true;
        }

        function stopTimer() {
            clearInterval(timerInterval);
            timerInterval = null;
            document.getElementById('startBtn').disabled = false;
        }

        function resetTimer() {
            stopTimer();
            seconds = 0;
            updateTimerDisplay();
        }

        function updateTimerDisplay() {
            const hours = Math.floor(seconds / 3600);
            const minutes = Math.floor((seconds % 3600) / 60);
            const secs = seconds % 60;
            document.getElementById('timerDisplay').textContent =
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
        }

        // ========== Initialize ==========
        window.addEventListener('DOMContentLoaded', loadData);
    </script>
</body>
</html>
